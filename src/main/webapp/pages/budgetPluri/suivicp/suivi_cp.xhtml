<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/template-1.0.xhtml">
	<ui:define name="head">
		<style type="text/css">
.indication1 {
	font-size: 10px;
	text-align: left;
	color: #FF0000;
}
</style>
	</ui:define>
	<ui:define name="lastPrefexedTitle">
					
					</ui:define>

	<ui:define name="entetePage">
	<ui:include src="/snippets/budget/enteteSuiviCP.xhtml"></ui:include>	
	</ui:define>
		<ui:define name="enteteAction">
		<p:commandButton title=" " immediate="true" value="#{msgs['cpwin.btn.afficher']}" actionListener="#{bpBean.searchSuiviCp}"
			 update=":detailsForm,globalMessage" >
		</p:commandButton>
	</ui:define>


	<ui:define name="search">
			
	
	</ui:define>


	<ui:define name="details">

		<p:panel  style="width:100%;" rendered="#{bpBean.globalSuiviCp!=null}">
			
			
				<p:panel id="surAeAntPanel" style="width:100%;">
			<h:panelGrid columns="12" style="width:100%; vertical-align:top;" >
				
		
		
		
		<h:panelGrid columns="1">	
			
			<p:commandButton styleClass="Label" title=" " immediate="true"  value="#{msgs['sur.ae.anterieur']}" action="#{bpBean.loadSuiviCpAeAnt}" 
			disabled="#{bpBean.suiviCpAeAnt!=null}" update="detailsForm:surAeAntPanel,globalMessage" >
		</p:commandButton>

						<h:panelGrid columns="1">
							<h:selectOneRadio   layout="pageDirection"
								valueChangeListener="#{bpBean.trsOrgnAntChangeListener}"
								value="#{bpBean.tiersOrigineAnt}" styleClass="boutonRadio">

								<f:selectItem itemLabel="#{msgs['cpwin.tiers.origine']}"
									itemValue="1" />
								<f:selectItem itemLabel="#{msgs['tiers.beneficiaire']}"
									itemValue="0" />

								<p:ajax process="@this"
									update="detailsForm:surAeAntPanel,globalMessage" />
							</h:selectOneRadio>
						</h:panelGrid>



					</h:panelGrid>
			
			<h:outputText  styleClass="Label" value="#{msgs['rap.01']}"  />
			<h:outputText value="#{bpBean.antRap}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
			<p:spacer width="40" height="10" />
			<h:outputText  styleClass="Label" value="#{msgs['credits.annul']}"  />
			<h:outputText value="#{bpBean.antCreditAnnul}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
			<p:spacer width="40" height="10" />
			<h:outputText  styleClass="Label" value="#{msgs['dp.emises']}" />
				<h:outputText value="#{bpBean.antDpEmise}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
			<p:spacer width="40" height="10" />
			<h:outputText  styleClass="Label" value="#{msgs['reste.emettre']}" />
				<h:outputText value="#{bpBean.antRae}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
			</h:panelGrid>
			<div align="right">
		<p:ajaxStatus id="status3" style="width:30px;height:30px;" >
				<f:facet name="start">
					<h:graphicImage value="/images/ajax/ajax-loader-0.gif" />
				</f:facet>
				<f:facet name="complete">
					<h:outputText value="" />
				</f:facet>
			</p:ajaxStatus>
			</div>
			<h:panelGrid  style="width:100%; vertical-align:top;" modal="true" id="details_suivi_cp_ant">
			<ui:include src="/pages/budgetPluri/suivicp/panel/details_suivi_cp_ant.xhtml"></ui:include>
			
			</h:panelGrid>
	<div align="center">
			<p:commandButton  title=" " value="#{msgs['budget.btn.export']}" immediate="true"  rendered="#{bpBean.suiviCpAeAnt!=null}"
					ajax="false" >
					<p:fileDownload value="#{bpBean.xlsSuiviCPAnt}"  />	

		</p:commandButton>
		</div>
			
			
			
			
			
			</p:panel>
			
			<p:panel id="surAeExecPanel"  style="width:100%;">
			<h:panelGrid columns="9" style="width:86%; vertical-align:top;" >
			
			
		
			<h:panelGrid columns="1">	
			
			<p:commandButton styleClass="Label" title=" " immediate="true" value="#{msgs['surae.exercice']}" action="#{bpBean.loadSuiviCpAeExec}" 
			disabled="#{bpBean.suiviCpAeExec!=null}" update="detailsForm:surAeExecPanel,globalMessage" >
		</p:commandButton>

						<h:panelGrid columns="1">
							<h:selectOneRadio   layout="pageDirection"
								valueChangeListener="#{bpBean.trsOrgnExecChangeListener}"
								value="#{bpBean.tiersOrigineExec}" styleClass="boutonRadio">

								<f:selectItem itemLabel="#{msgs['cpwin.tiers.origine']}"
									itemValue="1" />
								<f:selectItem itemLabel="#{msgs['tiers.beneficiaire']}"
									itemValue="0" />
	
								<p:ajax process="@this"
									update="detailsForm:surAeExecPanel,globalMessage" />
							</h:selectOneRadio>
						</h:panelGrid>



					</h:panelGrid>
			
	
			
			<h:outputText  styleClass="Label" value="#{msgs['ej.saisi']}"/>
			<h:outputText value="#{bpBean.execMtEj}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
			<p:spacer width="60" height="10" />
			<h:outputText  styleClass="Label" value="#{msgs['dp.emises']}" />
			<h:outputText value="#{bpBean.execDpEmise}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
			<p:spacer width="40" height="10" />
			<h:outputText  styleClass="Label" value="#{msgs['reste.emettre']}" />
			<h:outputText value="#{bpBean.execRae}"
					styleClass="montantStyle">
					 <f:convertNumber type="currency" currencySymbol=""></f:convertNumber> 
				</h:outputText>
				
			</h:panelGrid>
			<div align="right">
		<p:ajaxStatus id="status1" style="width:30px;height:30px;" >
				<f:facet name="start">
					<h:graphicImage value="/images/ajax/ajax-loader-0.gif" />
				</f:facet>
				<f:facet name="complete">
					<h:outputText value="" />
				</f:facet>
			</p:ajaxStatus>
			</div>
			<h:panelGrid  style="width:100%; vertical-align:top;" modal="true" id="details_suivi_cp_exec">
			<ui:include src="/pages/budgetPluri/suivicp/panel/details_suivi_cp_exec.xhtml"></ui:include>
			
			</h:panelGrid>
			<div align="center">
			<p:commandButton  title=" " value="#{msgs['budget.btn.export']}" immediate="true"  rendered="#{bpBean.suiviCpAeExec!=null}"
					ajax="false" >
					<p:fileDownload value="#{bpBean.xlsSuiviCPExec}"  />	

		</p:commandButton>
		</div>
			</p:panel>
			<p:panel style="width:100%;">

				<h:panelGrid columns="6" style="width:80%; vertical-align:top;">
					<h:outputText styleClass="Label" value="#{msgs['exercice.co']} "  />
					<h:outputText value="#{searchBean.exercice}" style="display:block;width:100px"	>
						
					</h:outputText>
					
					<h:outputText styleClass="Label" value="#{msgs['cpwin.budget']} " />
					<h:outputText value="#{searchBean.codeBudget}" style="display:block;width:100px">
						
					</h:outputText>
				
					<h:outputText styleClass="Label" value="#{msgs['nat.grp']} " />
					<h:outputText value="#{searchBean.codeNatureGrp}" style="display:block;width:100px"	>
						
					</h:outputText>
				</h:panelGrid>
				<h:panelGrid>
				<p:spacer  height="20" />
				</h:panelGrid>
               <h:panelGrid columns="4" style="width:80%; vertical-align:top;">
				<h:outputText styleClass="Label" value="#{msgs['bi']} " />
				<h:outputText value="#{bpBean.biSuiviCP}" styleClass="montantStyle" style="display:block;width:100px">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText styleClass="Label" value="#{msgs['ej.exec']} " />
				<h:outputText value="#{bpBean.ejExecSuiviCP}" style="display:block;width:100px"
				  styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText styleClass="Label" value="#{msgs['br.vises']} " />
				<h:panelGroup style="width:80%;">
				<h:panelGroup id="brInfoButton" >		
			 <p:commandButton   icon="fa fa-fw fa-search"     type="button" disabled="#{!bpBean.sumBrVises}" onclick="PF('infoBR').show();"   />
				</h:panelGroup>
				<h:outputText value="#{bpBean.brAccSuiviCP}" 
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				
				</h:panelGroup>
				<h:outputText styleClass="Label" value="#{msgs['rap.ej.rep']} " />
				<h:outputText value="#{bpBean.rapiniSuiviCP}" style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText styleClass="Label" value="#{msgs['br.en.cours']} " />
				<h:outputText value="#{bpBean.brProjetSuiviCP}" style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText />
				<h:outputText />
				<h:outputText styleClass="Label" value="#{msgs['total.co']} " />
				<h:outputText value="#{bpBean.coSuiviCP}" styleClass="montantStyle" style="display:block;width:100px">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText styleClass="Label" value="#{msgs['tot.du']} " />
				<h:outputText value="#{bpBean.apayerSuiviCP}" style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText value="&#160;" />
			<h:outputText value="&#160;" />
				<h:outputText value="&#160;" />
				<h:outputText value="&#160;" />
				
				
				<h:outputText styleClass="Label" value="#{msgs['disp.avt.pec']} " />
				<h:outputText value="#{bpBean.dispoServvSuiviCP}" style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText styleClass="Label" value="#{msgs['dp.emises']} " />
				<h:outputText value="#{bpBean.dpEmSuiviCP}" style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				<h:outputText styleClass="Label" value="#{msgs['disp.apr.pec']} " />
				<h:outputText value="#{bpBean.dispoOfficielSuiviCP}" style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
					<h:outputText styleClass="Label" value="#{msgs['cp.dp.pec']} " />
				<h:outputText value="#{bpBean.dpPecSuiviCP}"  style="display:block;width:100px"
					styleClass="montantStyle">
					<f:convertNumber type="currency" currencySymbol=""></f:convertNumber>
				</h:outputText>
				
			
				</h:panelGrid>
			</p:panel>

<p:dialog header="#{msgs['icon.information']}" widgetVar="infoBR" showEffect="explode"  width="700" >

          <p:dataTable id="br_dtt"
					 var="br" style="width:90%; text-align: center;" 
					emptyMessage="#{msgs['datatable.empty']}"
					value="#{bpBean.listBrVises}" paginator="true"
					rows="10">
					<p:column style="width:20%;">
						<f:facet name="header">
							<h:outputText value="#{msgs['no.br']}" />
						</f:facet>

						<h:outputText value="#{br.numero}"  />
					</p:column>
						<p:column style="width:20%;">
						<f:facet name="header">
							<h:outputText value="#{msgs['cpwin.objet']}" />
						</f:facet>

						<h:outputText value="#{br.libObjetBr}"  />
					</p:column>
					
						<p:column style="width:20%;">
						<f:facet name="header">
							<h:outputText value="#{msgs['montant.br']}" />
						</f:facet>

						<h:outputText value="#{br.montantBR}"   />
					</p:column>
					</p:dataTable>
		
		
		

	</p:dialog>
		</p:panel>
		
	</ui:define>
	
	<ui:define name="dialogs">
		
	</ui:define>
</ui:composition>