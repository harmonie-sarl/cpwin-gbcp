<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/template-1.0.xhtml">
	<ui:define name="head">
		<style type="text/css">

</style>
	</ui:define>
	<ui:define name="lastPrefexedTitle">

	</ui:define>
	<ui:define name="pageTitle">#{msgs['menu.signature']}</ui:define>
	
	
	<ui:define name="search">

			


	</ui:define>
	<ui:define name="details">
		<p:panel header="#{msgs['list.signatures']}" id="signaturePanel" style="width:100%;">
			<p:dataTable id="signature_list_dtt" var="sign" 
				
				style="width:100%;text-align:center" rowIndexVar="creditIndex"
				emptyMessage="#{msgs['datatable.empty']}"
				value="#{signatBean.signatureList}" paginator="true" rows="15">
				
						<p:column  headerText="Id" style="text-align:center" >
                              <h:outputText value="#{sign.id}"/>                                
                          </p:column>
						 <p:column headerText="#{msgs['codeSignataire']}" style="text-align:center">
                              <h:outputText value="#{sign.codeUtil}"/>                                
                          </p:column>
                           <p:column headerText="#{msgs['login.username']}" style="text-align:center">
                              <h:outputText value="#{signatBean.findUserName(sign.codeUtil)}"/>                                
                          </p:column>
				           <p:column headerText="#{msgs['stardate']}" style="text-align:center">
                              <h:outputText  value="#{sign.startDate}">  
                              <f:convertDateTime pattern="dd/MM/yyyy" type="date" timeZone="Europe/Paris" />
                              </h:outputText>
                          </p:column>
				           <p:column headerText="#{msgs['endDate']}" style="text-align:center">
                              <h:outputText value="#{sign.endDate}" >  
                              <f:convertDateTime pattern="dd/MM/yyyy" type="date" timeZone="Europe/Paris" />
                              </h:outputText>
                          </p:column>
			               <p:column headerText="#{msgs['function']}" style="text-align:center">
                              <h:outputText value="#{sign.function}" />  
                          </p:column>
                            <p:column headerText="#{msgs['sf']}" style="text-align:center" rendered="#{signatBean.sfSignAuthorized}">
                               <h:outputText value="#{sign.sf?'Oui':'Non'}" /> 
                          </p:column>
                            <p:column headerText="#{msgs['dp']}" style="text-align:center" rendered="#{signatBeanBean.dpSignAuthorized}">
                               <h:outputText value="#{sign.dp?'Oui':'Non'}"  /> 
                          </p:column>
                            <p:column headerText="#{msgs['dr']}" style="text-align:center" rendered="#{signatBeanBean.drSignAuthorized}">
                               <h:outputText value="#{sign.dr?'Oui':'Non'}"  /> 
                          </p:column>
                            <p:column headerText="#{msgs['dv']}" style="text-align:center" rendered="#{signatBean.dvSignAuthorized}">
                               <h:outputText value="#{sign.dv?'Oui':'Non'}"  /> 
                          </p:column>
				           <p:column headerText="#{msgs['da']}" style="text-align:center" rendered="#{signatBean.daSignAuthorized}">
                               <h:outputText value="#{sign.da?'Oui':'Non'}"  /> 
                          </p:column>
                            <p:column headerText="#{msgs['ej']}" style="text-align:center" rendered="#{signatBean.ejSignAuthorized}">
                               <h:outputText value="#{sign.ej?'Oui':'Non'}" /> 
                          </p:column>
                            <p:column headerText="#{msgs['asf']}" style="text-align:center" rendered="#{signatBean.asfSignAuthorized}">
                               <h:outputText value="#{sign.asf?'Oui':'Non'}" /> 
                          </p:column>
                            <p:column headerText="#{msgs['vsf']}" style="text-align:center" rendered="#{signatBean.vsfSignAuthorized}">
                               <h:outputText value="#{sign.vsf?'Oui':'Non'}" /> 
                          </p:column>
						   <p:column headerText="#{msgs['liq.dep']}" style="text-align:center" rendered="#{signatBean.liqSignAuthorized}">
                             <h:outputText  value="#{sign.liq?'Oui':'Non'}" /> 
                          </p:column>
						   <p:column headerText="#{msgs['liq.or']}" rendered="#{signatBean.orSignAuthorized}">
                             <h:outputText value="#{sign.liqOr?'Oui':'Non'}" />  
                          </p:column>
				         
			               
						  <p:column headerText="#{msgs['op']}" style="text-align:center" rendered="#{signatBean.opSignAuthorized}" >
                               <h:outputText value="#{sign.op?'Oui':'Non'}" /> 
                          </p:column>
                            <p:column  headerText="#{msgs['lrec']}" style="text-align:center" rendered="#{signatBean.lrecSignAuthorized}">
                               <h:outputText value="#{sign.lrec?'Oui':'Non'}" /> 
                          </p:column>
                           <p:column headerText="#{msgs['liq.ar']}" style="text-align:center" rendered="#{signatBean.arSignAuthorized}">
                               <h:outputText value="#{sign.ar?'Oui':'Non'}" /> 
                          </p:column>
                           <p:column headerText="#{msgs['mdt']}" style="text-align:center" rendered="#{signatBean.mdtSignAuthorized}">
                               <h:outputText value="#{sign.mdt?'Oui':'Non'}" /> 
                          </p:column>
                           <p:column headerText="#{msgs['tr']}" style="text-align:center" rendered="#{signatBean.trSignAuthorized}">
                               <h:outputText value="#{sign.tr?'Oui':'Non'}" /> 
                          </p:column>
                           <p:column headerText="#{msgs['actif']}" style="text-align:center" >
                               <h:outputText value="#{sign.actif?'Oui':'Non'}" /> 
                          </p:column>
						    <p:column headerText="#{msgs['btn.consulter']}" style="text-align:center">
                            <p:commandButton value="#{msgs['telech']}"   oncomplete="PF('dlgpdf').show()"  update="detailsForm:dlgpdf"  icon="searchIcon" title=" " > 
                           <f:setPropertyActionListener value="#{sign}" target="#{signatBean.selectedSignature}"></f:setPropertyActionListener>
           
                           </p:commandButton>
                              </p:column>

				<p:column headerText="#{msgs['btn.modifier']}" style="text-align:center">

					<p:commandButton 
						title="#{msgs['editer']}" icon="updateIcon" 
						action="#{signatBean.goToUpdateSignature}">
						<f:setPropertyActionListener target="#{signatBean.selectedSignature}"
							value="#{sign}" />
						<p:ajax event="dialogReturn" update=":detailsForm:signaturePanel" />

					</p:commandButton>
				</p:column>

			</p:dataTable>
			<br />
			<div align="center">

				<p:commandButton id="addSignBtn" 
					 value="#{msgs['btn.add']}" actionListener="#{signatBean.goToAddSignature}" disabled="#{!signatBean.requirmentsStatus}" >
					 <p:ajax event="dialogReturn" update=":detailsForm:signaturePanel" />
					 </p:commandButton>
			</div>
		</p:panel>
		<p:dialog id="dlgpdf" header="signataire" widgetVar="dlgpdf"   dynamic="true"   fitViewport="true" position="right,top"      showEffect="explode" height="150" width="250">     
				<p:graphicImage value="#{signatBean.signatStream}" cache="false"/>
     </p:dialog> 
   
	</ui:define>
</ui:composition>